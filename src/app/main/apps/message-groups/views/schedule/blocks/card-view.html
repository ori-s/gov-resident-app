<!-- TODO LIST ITEMS -->
<div class="padding-10 padding-top-20">
    <div class="animate-repeat mb-20"
         ng-if="(vm.groups | filter:{$$visible: true} | filter:{category:cat.id}:true).length"
         ng-repeat="cat in MS.group_categories | orderBy:vm.groupOrder:vm.groupOrderDescending track by cat.id">
        <div class="md-title  padding-horizontal-20">{{cat.name}}</div>
        <!-- MS-CARD -->
        <div  layout="row" flex="100" layout-wrap>
            <ms-widget class="group-card" flippable="true" flex="100" flex-gt-sm="50" flex-gt-md="33" flex-gt-lg="25"
                       ng-repeat="group in vm.groups | filter:{$$visible: true} | filter:{category:cat.id}:true | orderBy:vm.groupOrder:vm.groupOrderDescending | limitTo:50 track by group.id">
                <ms-widget-front class="p-15" layout="column"
                                 flex layout-fill layout-align="space-between center"
                                 ng-class="[group.$$anim, {'md-green-100-bg':group.subscribed, 'md-background-bg': !group.subscribed}]">

                    <div class="full-width" layout="row" layout-align="start center">
                        <img class="avatar" ng-if="group.avatar" alt="{{group.name}}" ng-src="{{group.avatar}}" />
                        <div class="avatar" ng-if="!group.avatar" ms-random-class="vm.colors">
                            {{group.name.substr(0,2)}}
                        </div>

                        <div flex>
                            <div class="text-truncate h3 text-semibold">{{group.name}}</div>
                        </div>

                        <md-icon md-font-icon="icon-star amber-fg m-near-8" class="s16"
                                 ng-if="thread.starred"></md-icon>

                    </div>

                    <div ng-if="$index == 0" class="tags full-width" layout="row" layout-align="start center" layout-wrap>
                        <div class="tag" layout="row" layout-align="start center" data-ng-repeat="tag in group.tags">
                            <div class="tag-color" ms-random-class="vm.colors"></div>
                            <div class="tag-label">{{tag}}</div>
                        </div>
                    </div>

                    <div ng-bind-html="group.description" class="p-10 full-width" style="max-heightX:140px; overflow:hidden" flex></div>

                    <div layout="row" layout-align="start center" class="full-width">
                        <md-button class="md-accent md-background" ng-click="vm.viewGroupMessages(group)">
                            <span translate>View group messages</span>
                        </md-button>
                        <div flex></div>
                        <md-button class="md-raised md-accent md-background" ng-click="flipWidget()">
                            <span>{{(group.subscribed ? 'Cancel subscription' : 'Subscribe to group') | translate}}</span>
                        </md-button>
                    </div>

                </ms-widget-front>
                <ms-widget-back class="p-15 white-fg" ng-class="{'light-blue-bg': !group.subscribed, 'md-orange-800-bg': group.subscribed}">
                    <div layout="column" layout-align="space-between center" class="full-height">
                        <div class="full-width" layout="row" layout-align="start center">
                            <img class="avatar" ng-if="group.avatar" alt="{{group.name}}" ng-src="{{group.avatar}}" />
                            <div class="avatar" ng-if="!group.avatar" ms-random-class="vm.colors">
                                {{group.name.substr(0,2)}}
                            </div>

                            <div flex>
                                <div class="text-truncate h3 text-semibold">{{group.name}}</div>
                            </div>
                        </div>
                        <div>
                            <div class="text-center font-size-18 margin-bottom-20">
                                {{(group.subscribed ? 'Cancel subscription' : 'Subscribe to group') | translate}}
                            </div>
                            <md-button class="md-raised md-primary" ng-click="vm.toggleGroupSubscribed(group, flipWidget);">
                                {{'Approve' | translate}}
                            </md-button>
                            <md-button class="md-raised md-warn" ng-click="flipWidget()">
                                {{'Cancel' | translate}}
                            </md-button>
                        </div>
                        <div style="height:40px"></div>
                    </div>

                </ms-widget-back>
            </ms-widget>
        </div>

        <!-- / MS-CARD -->
    </div>

</div>
<div ng-if="vm.groupCount == 0" class="text-center padding-vertical-60 secondary-text font-size-22">
    {{'No Matching Groups Found' | translate}}
</div>
<!-- / TODO LIST ITEMS -->